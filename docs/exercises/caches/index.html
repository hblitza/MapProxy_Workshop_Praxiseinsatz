<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Caches #  Aufgabe 1: #  Konfigurieren Sie einen Cache für den Layer zürich_ortho (zunächst für das Grid webmercator). Stellen Sie anschließend die Source für den Layer zürich_orthofoto auf diesen Cache um.
Erzeugen Sie manuell Requests an den Layer, um den Cache aufzubauen. Hierzu zoomen und panen Sie einfach in der MapProxy Demo auf dem Layer umher. Die Standard-Caching Konfiguration erzeugt Kacheln im Dateisystem. Vergewissern Sie sich, dass im Ordner cache_data ein Unterordner für den entsprechenden Layer erstellt wurde und Kacheln abgelegt wurden."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content><meta property="og:description" content="Caches #  Aufgabe 1: #  Konfigurieren Sie einen Cache für den Layer zürich_ortho (zunächst für das Grid webmercator). Stellen Sie anschließend die Source für den Layer zürich_orthofoto auf diesen Cache um.
Erzeugen Sie manuell Requests an den Layer, um den Cache aufzubauen. Hierzu zoomen und panen Sie einfach in der MapProxy Demo auf dem Layer umher. Die Standard-Caching Konfiguration erzeugt Kacheln im Dateisystem. Vergewissern Sie sich, dass im Ordner cache_data ein Unterordner für den entsprechenden Layer erstellt wurde und Kacheln abgelegt wurden."><meta property="og:type" content="article"><meta property="og:url" content="https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/docs/exercises/caches/"><meta property="article:section" content="docs"><title>Caches | im Praxiseinsatz</title><link rel=manifest href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/manifest.json><link rel=icon href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/favicon.png type=image/x-icon><link rel=stylesheet href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/book.min.58efd35a89849f5d78208f29c9f1521c311b7081bdace8cec1d86ae49600abef.css integrity="sha256-WO/TWomEn114II8pyfFSHDEbcIG9rOjOwdhq5JYAq+8=" crossorigin=anonymous></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/><img src=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/img/mapproxy.png alt=Logo><span>im Praxiseinsatz</span></a></h2><ul><li><a href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/><strong>Preface</strong></a></li><li><a href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/docs/introduction/><strong>Einführung</strong></a><ul><li><a href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/docs/introduction/sources/>Quellen / Dienste</a></li><li><a href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/docs/introduction/installation/>Installation</a></li><li><a href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/docs/introduction/caches/>Caches</a></li><li><a href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/docs/introduction/grids/>Grids</a></li></ul></li><li><a href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/docs/config/><strong>Konfiguration</strong></a><ul><li><a href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/docs/config/bausteine/>Bausteine</a></li><li><a href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/docs/config/mapproxy.yaml/>mapproxy.yaml</a></li><li><a href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/docs/config/seed.yaml/>seed.yaml</a></li></ul></li><li><a href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/docs/exercises/><strong>Übungsaufgaben</strong></a><ul><li><a href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/docs/exercises/setup/>Setup</a></li><li><a href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/docs/exercises/sources/>Sources</a></li><li><a href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/docs/exercises/caches/ class=active>Caches</a></li><li><a href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/docs/exercises/seeding/>Seeding</a></li></ul></li></ul></nav><script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Caches</strong>
<label for=toc-control></label></div></header><article class=markdown><h1 id=caches>Caches
<a class=anchor href=#caches>#</a></h1><h2 id=aufgabe-1>Aufgabe 1:
<a class=anchor href=#aufgabe-1>#</a></h2><p>Konfigurieren Sie einen Cache für den Layer <code>zürich_ortho</code> (zunächst für das Grid <code>webmercator</code>). Stellen Sie anschließend die Source für den Layer <code>zürich_orthofoto</code> auf diesen Cache um.<br>Erzeugen Sie manuell Requests an den Layer, um den Cache aufzubauen. Hierzu zoomen und panen Sie einfach in der MapProxy Demo auf dem Layer umher. Die Standard-Caching Konfiguration erzeugt Kacheln im Dateisystem. Vergewissern Sie sich, dass im Ordner <code>cache_data</code> ein Unterordner für den entsprechenden Layer erstellt wurde und Kacheln abgelegt wurden.</p><div class=book-expand><label><div class="book-expand-head flex justify-between"><span>Expand</span>
<span>↕</span></div><input type=checkbox class=hidden><div class="book-expand-content markdown-inner"><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>layers</span>:
<span style=color:#ae81ff>(...)</span>
  - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>zürich_orthofoto</span>
    <span style=color:#f92672>title</span>: <span style=color:#ae81ff>Zürich Orthofoto Sommer</span>
    <span style=color:#f92672>sources</span>: [<span style=color:#ae81ff>zürich_cache]</span>

<span style=color:#f92672>caches</span>:
  <span style=color:#f92672>osm_cache</span>:
    <span style=color:#f92672>grids</span>: [<span style=color:#ae81ff>webmercator]</span>
    <span style=color:#f92672>sources</span>: [<span style=color:#ae81ff>osm_wms]</span>
  <span style=color:#f92672>zürich_cache</span>:
    <span style=color:#f92672>grids</span>: [<span style=color:#ae81ff>webmercator]</span>
    <span style=color:#f92672>sources</span>: [<span style=color:#ae81ff>zürich_ortho]</span>
</code></pre></div></div></label></div><h2 id=aufgabe-2>Aufgabe 2:
<a class=anchor href=#aufgabe-2>#</a></h2><p>Definieren Sie ein neues Grid für die UTM Zone 32N (EPSG:25832) in den Maßstäben 25.000, 10.000, 5000, 2.500 und 1.000.<br>Es gibt viele Parameter für eine <a href=https://mapproxy.org/docs/latest/configuration.html#id6>Grid-Konfiguration</a>, beschränken Sie sich zunächst auf:</p><ul><li>bbox (siehe <a href=https://epsg.io/25832>https://epsg.io/25832</a>)</li><li>ggf. bbox_srs</li><li>origin (nw = upperleft corner)</li><li>res</li></ul><p>Für letzteren Parameter kann das Tool <code>mapproxy-util scales</code> verwendet werden. Infos: <a href=https://mapproxy.org/docs/latest/mapproxy_util.html#scales>https://mapproxy.org/docs/latest/mapproxy_util.html#scales</a></p><p>Verwenden Sie das neu erstellte Grid für den oben erzeugten Cache <code>zürich_cache</code>.</p><div class=book-expand><label><div class="book-expand-head flex justify-between"><span>Expand</span>
<span>↕</span></div><input type=checkbox class=hidden><div class="book-expand-content markdown-inner"><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>grids</span>:
    <span style=color:#f92672>webmercator</span>:
        <span style=color:#f92672>base</span>: <span style=color:#ae81ff>GLOBAL_WEBMERCATOR</span>
    <span style=color:#f92672>utm32n</span>:
      <span style=color:#f92672>bbox</span>: [-<span style=color:#ae81ff>16.1</span>, <span style=color:#ae81ff>32.88</span>, <span style=color:#ae81ff>40.18</span>, <span style=color:#ae81ff>84.17</span>]
      <span style=color:#f92672>bbox_srs</span>: <span style=color:#e6db74>&#39;EPSG:4326&#39;</span>
      <span style=color:#f92672>srs</span>: <span style=color:#ae81ff>EPSG:25832</span>
      <span style=color:#f92672>origin</span>: <span style=color:#ae81ff>nw</span>
      <span style=color:#f92672>res</span>: [
         <span style=color:#75715e>#  res            level     scale @90.7 DPI</span>
            <span style=color:#ae81ff>7.0000000000</span>, <span style=color:#75715e>#  0       25000.00000000</span>
            <span style=color:#ae81ff>5.6000000000</span>, <span style=color:#75715e>#  1       20000.00000000</span>
            <span style=color:#ae81ff>4.2000000000</span>, <span style=color:#75715e>#  2       15000.00000000</span>
            <span style=color:#ae81ff>2.8000000000</span>, <span style=color:#75715e>#  3       10000.00000000</span>
            <span style=color:#ae81ff>1.4000000000</span>, <span style=color:#75715e>#  4        5000.00000000</span>
            <span style=color:#ae81ff>0.7000000000</span>, <span style=color:#75715e>#  5        2500.00000000</span>
            <span style=color:#ae81ff>0.2800000000</span>, <span style=color:#75715e>#  6        1000.00000000</span>
    ]
</code></pre></div></div></label></div><h2 id=aufgabe-3>Aufgabe 3:
<a class=anchor href=#aufgabe-3>#</a></h2><p>Definieren Sie ein neues Falschfarben-Komposit für den <code>zürich_cache</code>, in dem Sie die Farbkanäle vertauschen.<br>Infos: <a href=https://mapproxy.org/docs/latest/configuration.html#band-merging>https://mapproxy.org/docs/latest/configuration.html#band-merging</a></p><h2 id=lösung>Lösung:
<a class=anchor href=#l%c3%b6sung>#</a></h2><div class=book-expand><label><div class="book-expand-head flex justify-between"><span>Expand</span>
<span>↕</span></div><input type=checkbox class=hidden><div class="book-expand-content markdown-inner"><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>caches</span>:
  <span style=color:#f92672>osm_cache</span>:
    <span style=color:#f92672>grids</span>: [<span style=color:#ae81ff>webmercator]</span>
    <span style=color:#f92672>sources</span>: [<span style=color:#ae81ff>osm_wms]</span>
  <span style=color:#f92672>zürich_cache</span>:
    <span style=color:#f92672>grids</span>: [<span style=color:#ae81ff>utm32n]</span>
    <span style=color:#f92672>sources</span>:
      <span style=color:#f92672>r</span>: [{<span style=color:#f92672>source: zürich_ortho, band</span>: <span style=color:#ae81ff>2</span>}]
      <span style=color:#f92672>g</span>: [{<span style=color:#f92672>source: zürich_ortho, band</span>: <span style=color:#ae81ff>0</span>}]
      <span style=color:#f92672>b</span>: [{<span style=color:#f92672>source: zürich_ortho, band</span>: <span style=color:#ae81ff>1</span>}]
</code></pre></div></div></label></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div></main></body></html>