<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Sources #  Aufgabe 1: #  Fügen Sie eine neue Source mit weltweiter Abdeckung hinzu, beispielsweise den TopPlusOpen Dienst des BKG (Bundesmat für Kartographie und Geodäsie) mit der URL: https://sgx.geodatenzentrum.de/wms_topplus_open
Aufgabe 2: #  Stellen Sie die WMS-Version der neuen Source auf 1.3.0 und aktivieren Sie legendgraphic Option. Laden Sie den Layer in QGIS und überprüfen Sie die GetLegendGraphic Function.
Aufgabe 3: #  Beschränken Sie die Source auf den Extent der Schweiz."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content><meta property="og:description" content="Sources #  Aufgabe 1: #  Fügen Sie eine neue Source mit weltweiter Abdeckung hinzu, beispielsweise den TopPlusOpen Dienst des BKG (Bundesmat für Kartographie und Geodäsie) mit der URL: https://sgx.geodatenzentrum.de/wms_topplus_open
Aufgabe 2: #  Stellen Sie die WMS-Version der neuen Source auf 1.3.0 und aktivieren Sie legendgraphic Option. Laden Sie den Layer in QGIS und überprüfen Sie die GetLegendGraphic Function.
Aufgabe 3: #  Beschränken Sie die Source auf den Extent der Schweiz."><meta property="og:type" content="article"><meta property="og:url" content="https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/docs/exercises/sources/"><meta property="article:section" content="docs"><title>Sources | im Praxiseinsatz</title><link rel=manifest href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/manifest.json><link rel=icon href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/favicon.png type=image/x-icon><link rel=stylesheet href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/book.min.58efd35a89849f5d78208f29c9f1521c311b7081bdace8cec1d86ae49600abef.css integrity="sha256-WO/TWomEn114II8pyfFSHDEbcIG9rOjOwdhq5JYAq+8=" crossorigin=anonymous><script defer src=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/flexsearch.min.js></script><script defer src=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/en.search.min.49960ce8d68068a143514720f086128ce365650daa18ce91ad9c45d6fd4a6c74.js integrity="sha256-SZYM6NaAaKFDUUcg8IYSjONlZQ2qGM6RrZxF1v1KbHQ=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/><img src=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/img/mapproxy.png alt=Logo><span>im Praxiseinsatz</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/>Einführung</a><ul><li><a href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/docs/introduction/sources/>Quellen / Dienste</a></li><li><a href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/docs/introduction/installation/>Installation</a></li></ul></li><li><a href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/docs/config/>Konfiguration</a><ul><li><a href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/docs/config/bausteine/>Bausteine</a></li><li><a href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/docs/config/mapproxy.yaml/>mapproxy.yaml</a></li></ul></li><li><a href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/docs/exercises/>Übungsaufgaben</a><ul><li><a href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/docs/exercises/setup/>Setup</a></li><li><a href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/docs/exercises/sources/ class=active>Sources</a></li><li><a href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/docs/exercises/caches/>Caches</a></li><li><a href=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/docs/exercises/seeding/>Seeding</a></li></ul></li></ul></nav><script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=https://hblitza.github.io/MapProxy_Workshop_Praxiseinsatz/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Sources</strong>
<label for=toc-control></label></div></header><article class=markdown><h1 id=sources>Sources
<a class=anchor href=#sources>#</a></h1><h2 id=aufgabe-1>Aufgabe 1:
<a class=anchor href=#aufgabe-1>#</a></h2><p>Fügen Sie eine neue Source mit weltweiter Abdeckung hinzu, beispielsweise den TopPlusOpen Dienst des BKG (Bundesmat für Kartographie und Geodäsie) mit der URL: <a href=https://sgx.geodatenzentrum.de/wms_topplus_open>https://sgx.geodatenzentrum.de/wms_topplus_open</a></p><h2 id=aufgabe-2>Aufgabe 2:
<a class=anchor href=#aufgabe-2>#</a></h2><p>Stellen Sie die WMS-Version der neuen Source auf 1.3.0 und aktivieren Sie <code>legendgraphic</code> Option. Laden Sie den Layer in QGIS und überprüfen Sie die GetLegendGraphic Function.</p><h2 id=aufgabe-3>Aufgabe 3:
<a class=anchor href=#aufgabe-3>#</a></h2><p>Beschränken Sie die Source auf den Extent der Schweiz. Hier führen mehrere Wege zum Ziel! Am einfachsten ist die Angabe einer Bounding Box, möglich ist aber auch die Angabe des Coverages durch externe Geodaten (Shape, GeoJSON, PostGIS) oder simple WKT-Dateien (siehe: <a href=https://mapproxy.org/docs/latest/coverages.html#coverages)>https://mapproxy.org/docs/latest/coverages.html#coverages)</a>.<br>Verwenden Sie einmal die Methode einer einfachen Bounding box und formulieren Sie als <strong>Bonus</strong> eine SQL-Abfrage für den Extent der Länder Österreich und Schweiz. Hierzu sind auf der OS Geo Live Natural Earth Daten in einer Postgres/PostGIS Datenbank hinterlegt (Tabelle: <code>ne_10m_admin_0_countries</code>).</p><h2 id=lösung-3>Lösung 3:
<a class=anchor href=#l%c3%b6sung-3>#</a></h2><div class=book-expand><label><div class="book-expand-head flex justify-between"><span>Expand</span>
<span>↕</span></div><input type=checkbox class=hidden><div class="book-expand-content markdown-inner"><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>sources</span>:
  <span style=color:#f92672>topPlus_open_source</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>wms</span>
    <span style=color:#f92672>req</span>:
      <span style=color:#f92672>url</span>: <span style=color:#ae81ff>https://sgx.geodatenzentrum.de/wms_topplus_open</span>
      <span style=color:#f92672>layers</span>: <span style=color:#ae81ff>web</span>
    <span style=color:#f92672>supported_srs</span>: [<span style=color:#e6db74>&#39;EPSG:3857&#39;</span>]
    <span style=color:#f92672>wms_opts</span>:
      <span style=color:#f92672>version</span>: <span style=color:#ae81ff>1.3.0</span>
      <span style=color:#f92672>legendgraphic</span>: <span style=color:#66d9ef>true</span>
    <span style=color:#f92672>coverage</span>:
      <span style=color:#f92672>bbox</span>: [<span style=color:#ae81ff>5.95</span>, <span style=color:#ae81ff>45.82</span>, <span style=color:#ae81ff>10.46</span>, <span style=color:#ae81ff>47.80</span>]
      <span style=color:#f92672>srs</span>: <span style=color:#e6db74>&#39;EPSG:4326&#39;</span>
</code></pre></div></div></label></div><h2 id=lösung-3-bonus>Lösung 3 Bonus:
<a class=anchor href=#l%c3%b6sung-3-bonus>#</a></h2><div class=book-expand><label><div class="book-expand-head flex justify-between"><span>Expand</span>
<span>↕</span></div><input type=checkbox class=hidden><div class="book-expand-content markdown-inner"><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>sources</span>:
  <span style=color:#f92672>topPlus_open_source</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>wms</span>
    <span style=color:#f92672>req</span>:
      <span style=color:#f92672>url</span>: <span style=color:#ae81ff>https://sgx.geodatenzentrum.de/wms_topplus_open</span>
      <span style=color:#f92672>layers</span>: <span style=color:#ae81ff>web</span>
    <span style=color:#f92672>supported_srs</span>: [<span style=color:#e6db74>&#39;EPSG:3857&#39;</span>]
    <span style=color:#f92672>wms_opts</span>:
      <span style=color:#f92672>version</span>: <span style=color:#ae81ff>1.3.0</span>
      <span style=color:#f92672>legendgraphic</span>: <span style=color:#66d9ef>true</span>
    <span style=color:#f92672>coverage</span>:
      <span style=color:#f92672>datasource</span>: <span style=color:#e6db74>&#34;PG: dbname=&#39;natural_earth2&#39; host=&#39;localhost&#39; user=&#39;user&#39; password=&#39;user&#39;&#34;</span>
      <span style=color:#f92672>where</span>: <span style=color:#e6db74>&#34;select * from ne_10m_admin_0_countries where sov_a3=&#39;CHE&#39; OR sov_a3=&#39;AUT&#39;&#34;</span>
      <span style=color:#f92672>srs</span>: <span style=color:#e6db74>&#39;EPSG:4326&#39;</span>
</code></pre></div></div></label></div><h2 id=aufgabe-4>Aufgabe 4:
<a class=anchor href=#aufgabe-4>#</a></h2><p>Fügen Sie eine neue WMS Source des Kantons Zürich hinzu (URL: <a href=https://wms.zh.ch/OGDOrthoZH),>https://wms.zh.ch/OGDOrthoZH),</a> wählen Sie den Layer <code>ortho_s</code> und konfigurieren Sie den Dienst für die WMS-Version 1.3.0. Dieser Layer enthält Orthofotos des Kantons Zürichs aus dem Jahr 2020.</p><h2 id=aufgabe-5>Aufgabe 5:
<a class=anchor href=#aufgabe-5>#</a></h2><p>Definieren Sie <code>Image Format Options</code> für diese Source mit dem Ziel, dass die Farbe Weiß vollständig transparent wird (an den Rändern des Orthofotos befinden sich weiße Blöcke). Infos: <a href=https://mapproxy.org/docs/latest/sources.html#image>https://mapproxy.org/docs/latest/sources.html#image</a><br>Variieren Sie die <code>transparent_color_tolerance</code> und beobachten Sie das Ergebnis. Welcher Fehler kann an dieser Stelle entstehen?</p><h2 id=lösung-45>Lösung 4+5:
<a class=anchor href=#l%c3%b6sung-45>#</a></h2><div class=book-expand><label><div class="book-expand-head flex justify-between"><span>Expand</span>
<span>↕</span></div><input type=checkbox class=hidden><div class="book-expand-content markdown-inner"><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>zürich_ortho</span>:
    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>wms</span>
    <span style=color:#f92672>wms_opts</span>:
      <span style=color:#f92672>version</span>: <span style=color:#ae81ff>1.3.0</span>
    <span style=color:#f92672>image</span>:
      <span style=color:#f92672>format</span>: <span style=color:#ae81ff>image/png</span>
      <span style=color:#f92672>transparent_color</span>: <span style=color:#e6db74>&#39;#ffffff&#39;</span>
      <span style=color:#f92672>transparent_color_tolerance</span>: <span style=color:#ae81ff>50</span>
    <span style=color:#f92672>req</span>:
      <span style=color:#f92672>url</span>: <span style=color:#ae81ff>https://wms.zh.ch/OGDOrthoZH</span>
      <span style=color:#f92672>layers</span>: <span style=color:#ae81ff>ortho_s</span>
    <span style=color:#f92672>coverage</span>:
    <span style=color:#75715e># approx. bbox in epsg:3857</span>
      <span style=color:#f92672>bbox</span>: [<span style=color:#ae81ff>908057</span>, <span style=color:#ae81ff>5965233</span>, <span style=color:#ae81ff>1006505</span>, <span style=color:#ae81ff>6081637</span>]
      <span style=color:#f92672>srs</span>: <span style=color:#e6db74>&#39;EPSG:3857&#39;</span>
</code></pre></div></div></label></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div></main></body></html>